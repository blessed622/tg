# bot/handlers/help_handlers.py - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–ª—è —Ä–∞–∑–¥–µ–ª–∞ –ø–æ–º–æ—â–∏

from aiogram import types, F, Router, Dispatcher, Bot
from aiogram.filters import Command
from aiogram.fsm.context import FSMContext

from bot.keyboards.main_menu import get_main_menu


async def help_command(message: types.Message | types.CallbackQuery, state: FSMContext, db, bot: Bot):
    """–û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–æ–º–∞–Ω–¥—ã /help - –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–ø—Ä–∞–≤–∫—É –ø–æ –±–æ—Ç—É"""
    # –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø –≤—Ö–æ–¥—è—â–µ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è
    if isinstance(message, types.CallbackQuery):
        await message.answer()  # –£–±–∏—Ä–∞–µ–º —á–∞—Å—ã –Ω–∞ –∫–Ω–æ–ø–∫–µ
        message = message.message
    
    # –°–æ–¥–µ—Ä–∂–∏–º–æ–µ —Å–ø—Ä–∞–≤–∫–∏
    help_text = (
        "ü§ñ <b>–°–ø—Ä–∞–≤–∫–∞ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –±–æ—Ç–∞ –∞–≤—Ç–æ–ø–æ—Å—Ç–∏–Ω–≥–∞</b>\n\n"
        "<b>–û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã:</b>\n"
        "‚Ä¢ /start - –Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É —Å –±–æ—Ç–æ–º\n"
        "‚Ä¢ /help - –ø–æ–∫–∞–∑–∞—Ç—å —ç—Ç—É —Å–ø—Ä–∞–≤–∫—É\n"
        "‚Ä¢ /auth - –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è –≤ —Å–∏—Å—Ç–µ–º–µ\n"
        "‚Ä¢ /subscription - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–¥–ø–∏—Å–∫–µ\n\n"
        
        "<b>–ü–æ—Ä—è–¥–æ–∫ —Ä–∞–±–æ—Ç—ã —Å –±–æ—Ç–æ–º:</b>\n"
        "1. –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å –≤ —Å–∏—Å—Ç–µ–º–µ —Å –ø–æ–º–æ—â—å—é API ID –∏ API Hash\n"
        "   (–∫–∞–∫ –ø–æ–ª—É—á–∏—Ç—å API ID –∏ Hash - —Å–º. –Ω–∏–∂–µ)\n"
        "2. –û—Ñ–æ—Ä–º–∏—Ç–µ –ø–æ–¥–ø–∏—Å–∫—É, –Ω–∞–ø–∏—Å–∞–≤ @lovelymaxing\n"
        "3. –°–æ–∑–¥–∞–π—Ç–µ –∑–∞–¥–∞—á—É –∞–≤—Ç–æ–ø–æ—Å—Ç–∏–Ω–≥–∞, —É–∫–∞–∑–∞–≤:\n"
        "   - –¶–µ–ª–µ–≤–æ–π —á–∞—Ç/–∫–∞–Ω–∞–ª\n"
        "   - –¢–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è\n"
        "   - –ò–Ω—Ç–µ—Ä–≤–∞–ª –æ—Ç–ø—Ä–∞–≤–∫–∏ (–æ—Ç 20 –¥–æ 999 —Å–µ–∫—É–Ω–¥)\n\n"
        
        "<b>–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å API ID –∏ API Hash:</b>\n"
        "1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ —Å–∞–π—Ç https://my.telegram.org\n"
        "2. –í–æ–π–¥–∏—Ç–µ –≤ —Å–≤–æ–π –∞–∫–∫–∞—É–Ω—Ç\n"
        "3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ —Ä–∞–∑–¥–µ–ª 'API development tools'\n"
        "4. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è\n"
        "5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ API ID (—Ü–∏—Ñ—Ä—ã) –∏ API Hash (–±—É–∫–≤—ã –∏ —Ü–∏—Ñ—Ä—ã)\n\n"
        
        "<b>–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –∞–≤—Ç–æ–ø–æ—Å—Ç–∏–Ω–≥–∞:</b>\n"
        "‚Ä¢ –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π —Å –∑–∞–¥–∞–Ω–Ω—ã–º –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º\n"
        "‚Ä¢ –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ –ª—é–±—ã–µ –∫–∞–Ω–∞–ª—ã, –≥–¥–µ –≤—ã —è–≤–ª—è–µ—Ç–µ—Å—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º\n"
        "‚Ä¢ –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ –ª—é–±—ã–µ –≥—Ä—É–ø–ø—ã, –≥–¥–µ –≤—ã —è–≤–ª—è–µ—Ç–µ—Å—å —É—á–∞—Å—Ç–Ω–∏–∫–æ–º\n"
        "‚Ä¢ –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ –ª–∏—á–Ω—ã–µ —á–∞—Ç—ã\n"
        "‚Ä¢ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Ç–µ–∫—Å—Ç–∞ (HTML)\n\n"
        
        "<b>–ü–æ –≤—Å–µ–º –≤–æ–ø—Ä–æ—Å–∞–º –æ–±—Ä–∞—â–∞–π—Ç–µ—Å—å:</b>\n"
        "‚Ä¢ @lovelymaxing - —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –∏ –æ–ø–ª–∞—Ç–∞ –ø–æ–¥–ø–∏—Å–∫–∏\n\n"
        
        "üí° <b>–°–æ–≤–µ—Ç:</b> –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –±–æ—Ç –∏–º–µ–µ—Ç –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø—Ä–∞–≤–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π –≤ —É–∫–∞–∑–∞–Ω–Ω—ã—Ö –∫–∞–Ω–∞–ª–∞—Ö –∏ –≥—Ä—É–ø–ø–∞—Ö."
    )
    
    await message.answer(help_text, reply_markup=get_main_menu())


def register_help_handlers(dp: Dispatcher, db, bot: Bot):
    """–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤ –ø–æ–º–æ—â–∏"""
    # –ö–æ–º–∞–Ω–¥–∞ help
    dp.message.register(lambda message, state: help_command(message, state, db, bot), Command("help"))
    
    # Callback –∑–∞–ø—Ä–æ—Å—ã
    dp.callback_query.register(lambda call, state: help_command(call, state, db, bot), F.data == "help:show")
